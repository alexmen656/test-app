(()=>{var e={};e.id=768,e.ids=[768],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1435:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/alexpolan/betabay/test-app/app/detail/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/alexpolan/betabay/test-app/app/detail/[id]/page.tsx","default")},1588:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=s(5239),a=s(8088),l=s(8170),i=s.n(l),n=s(893),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let d={children:["",{children:["detail",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1435)),"/Users/alexpolan/betabay/test-app/app/detail/[id]/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,8014)),"/Users/alexpolan/betabay/test-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/alexpolan/betabay/test-app/app/detail/[id]/page.tsx"],p={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/detail/[id]/page",pathname:"/detail/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},5479:(e,t,s)=>{Promise.resolve().then(s.bind(s,7517))},6055:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(1658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},6189:(e,t,s)=>{"use strict";var r=s(5773);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},7231:(e,t,s)=>{Promise.resolve().then(s.bind(s,1435))},7517:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s(687),a=s(474),l=s(3210),i=s(6189);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),d=e=>{let t=o(e);return t.charAt(0).toUpperCase()+t.slice(1)},c=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim(),p=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var m={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let u=(0,l.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:n,...o},d)=>(0,l.createElement)("svg",{ref:d,...m,width:t,height:t,stroke:e,strokeWidth:r?24*Number(s)/Number(t):s,className:c("lucide",a),...!i&&!p(o)&&{"aria-hidden":"true"},...o},[...n.map(([e,t])=>(0,l.createElement)(e,t)),...Array.isArray(i)?i:[i]])),h=(e,t)=>{let s=(0,l.forwardRef)(({className:s,...r},a)=>(0,l.createElement)(u,{ref:a,iconNode:t,className:c(`lucide-${n(d(e))}`,`lucide-${e}`,s),...r}));return s.displayName=d(e),s},x=h("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),f=h("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),g=h("gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]),b=h("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var v=s(9556);let j=()=>{let e=(0,i.useRouter)(),{id:t}=(0,i.useParams)(),[s,n]=(0,l.useState)(null),[o,d]=(0,l.useState)(!0),[c,p]=(0,l.useState)(null),m=s?.creator?.id==="a135d7e0-3d80-4ed1-b80c-a2fc1444308f";return(0,l.useEffect)(()=>{(async()=>{d(!0),p(null);try{let e=(0,v.w)(),s=localStorage.getItem("betabay_token"),r={};s&&(r.Authorization=`Bearer ${s}`);let a=await fetch(`${e}/api/test-posts/${t}`,{method:"GET",headers:r});if(!a.ok)throw Error(`Failed to fetch app data: ${a.status}`);let l=await a.json();console.log("Fetched app detail data:",l),n(l)}catch(e){console.error("Error fetching app data:",e),p("Failed to load app data. Please try again.")}finally{d(!1)}})()},[t]),(0,r.jsxs)("div",{className:"h-screen overflow-y-auto flex-1 bg-gray-50 text-gray-800 animate-fade-in",children:[(0,r.jsxs)("button",{onClick:()=>{m?e.push("/myapps"):e.push("/")},className:"absolute top-6 left-6 z-20 flex items-center gap-2 rounded-full bg-white/70 px-4 py-2 text-sm font-semibold text-gray-800 shadow-md backdrop-blur-sm transition-all hover:bg-white hover:scale-105",children:[(0,r.jsx)(x,{size:16}),"Back to Explore"]}),o?(0,r.jsxs)("div",{className:"flex justify-center items-center h-64 mt-20",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"}),(0,r.jsx)("p",{className:"ml-3 text-lg text-gray-600",children:"Loading app data..."})]}):c?(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md m-10",children:[(0,r.jsx)("p",{className:"font-medium",children:"Error"}),(0,r.jsx)("p",{children:c}),(0,r.jsx)("button",{onClick:()=>e.push("/explore"),className:"mt-2 px-4 py-2 bg-red-100 text-red-800 rounded-md hover:bg-red-200",children:"Return to Explore"})]}):s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"relative h-56 md:h-72 w-full bg-gray-200",children:[(0,r.jsx)(a.default,{src:s.coverImageUrl||s.cover_image_url||"/vercel.svg",alt:`${s.name||s.app_name||"App"} cover image`,layout:"fill",objectFit:"cover"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-black/20"}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 p-8",children:(0,r.jsx)("h1",{className:"text-3xl md:text-5xl font-bold text-white shadow-lg",children:s.name||s.app_name||"Unnamed App"})})]}),(0,r.jsxs)("div",{className:"p-6 md:p-8",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4 border-b border-gray-200 pb-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[s.creator?.avatarUrl||s.user_info?.profile_image?(0,r.jsx)(a.default,{src:s.creator?.avatarUrl||s.user_info?.profile_image||"/vercel.svg",alt:s.creator?.name||s.user_info?.username||"Creator",width:40,height:40,className:"rounded-full"}):(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-gray-600 font-bold",children:(s.creator?.name||s.user_info?.username||"U").charAt(0)})}),(0,r.jsx)("span",{className:"font-semibold text-gray-600",children:s.creator?.name||s.user_info?.username||"Unknown Creator"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[s.creator?.slackLink&&(0,r.jsxs)("button",{onClick:()=>{window.open(s.creator?.slackLink,"_blank")},className:"flex items-center gap-2 rounded-md bg-gray-200 px-4 py-2 font-semibold text-gray-700 transition-colors hover:bg-gray-300",children:[(0,r.jsx)(f,{size:16})," Message"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 rounded-md bg-green-100 px-4 py-2",children:[(0,r.jsx)("span",{className:"font-bold text-green-700",children:"number"==typeof s.price?`$${s.price}`:"number"==typeof s.test_price?`$${s.test_price}`:s.price||s.test_price||"Free"}),s.coins&&(0,r.jsxs)("div",{className:"flex items-center gap-1 text-yellow-600",children:[(0,r.jsx)(g,{size:16}),(0,r.jsx)("span",{className:"font-semibold",children:s.coins})]})]})]})]}),(0,r.jsxs)("div",{className:"mt-6 grid grid-cols-1 gap-8 lg:grid-cols-3",children:[(0,r.jsxs)("div",{className:"lg:col-span-2",children:[(0,r.jsxs)("section",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-3",children:"Description"}),(0,r.jsx)("p",{className:"text-gray-600 leading-relaxed",children:s.description||"No description available."})]}),(0,r.jsxs)("section",{className:"mt-8",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Screenshots"}),s.screenshots?.length||s.screenshot_urls?.length?(0,r.jsx)("div",{className:"flex gap-4 overflow-x-auto",children:(s.screenshots||s.screenshot_urls||[]).map((e,t)=>(0,r.jsx)("div",{className:"relative h-200 min-w-[400px] rounded-lg bg-gray-200 overflow-hidden",children:(0,r.jsx)(a.default,{src:e,alt:`Screenshot ${t+1}`,layout:"fill",objectFit:"cover",className:"transition-transform duration-300 hover:scale-105"})},t))}):(0,r.jsx)("p",{className:"text-gray-500",children:"No screenshots available."})]}),(s.videoUrl||s.youtube_link)&&(0,r.jsxs)("section",{className:"mt-8",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Video"}),(0,r.jsx)("div",{className:"aspect-video w-full rounded-lg overflow-hidden bg-black",children:(0,r.jsx)("iframe",{src:s.videoUrl||s.youtube_link||"",className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})]}),(0,r.jsxs)("aside",{children:[(0,r.jsxs)("section",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[(0,r.jsx)("h3",{className:"font-bold mb-3",children:m?"Manage App":"Join Test"}),m?(0,r.jsx)("button",{onClick:()=>e.push(`/myapps/edit/${s.id}`),className:"block w-full text-center rounded-md bg-green-600 py-2.5 font-semibold text-white transition-colors hover:bg-green-700",children:"Edit Profile"}):(0,r.jsx)("a",{href:`/test-instruction/${s.id}`,className:"block w-full text-center rounded-md bg-blue-600 py-2.5 font-semibold text-white transition-colors hover:bg-blue-700",children:"Join"})]}),s.joinedTesters&&s.joinedTesters.length>0&&(0,r.jsxs)("section",{className:"mt-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold mb-3",children:["Joined Testers (",s.joinedTesters.length,")"]}),(0,r.jsx)("div",{className:"space-y-3",children:s.joinedTesters.map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-3 rounded-md bg-gray-100 p-2",children:[(0,r.jsx)(a.default,{src:e.avatarUrl,alt:e.name,width:32,height:32,className:"rounded-full"}),(0,r.jsx)("span",{className:"font-medium text-gray-700",children:e.name})]},e.id))})]}),s.reviews&&s.reviews.length>0&&(0,r.jsxs)("section",{className:"mt-8",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Reviews (",s.reviews.length,")"]}),(0,r.jsx)("div",{className:"space-y-4",children:s.reviews.map(e=>(0,r.jsxs)("div",{className:"rounded-lg bg-white border border-gray-200 p-3",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,r.jsx)("span",{className:"font-semibold",children:e.reviewerName}),(0,r.jsxs)("div",{className:"flex items-center gap-1 text-yellow-500",children:[(0,r.jsx)("span",{className:"font-bold",children:e.score}),(0,r.jsx)(b,{size:16,fill:"currentColor"})]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.comment})]},e.id))})]})]})]})]})]}):(0,r.jsx)("div",{className:"flex justify-center items-center h-64 mt-20",children:(0,r.jsx)("p",{className:"text-lg text-gray-600",children:"App not found."})})]})}},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")},9556:(e,t,s)=>{"use strict";function r(){return process.env.NEXT_PUBLIC_BACKEND_URL2||"https://betbay-backend.vercel.app"}s.d(t,{w:()=>r})}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,523,658,402],()=>s(1588));module.exports=r})();